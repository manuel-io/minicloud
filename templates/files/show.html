{% extends "layout.html" %}
{% from "_macros.html" import aside with context %}
{% from "files/_macros.html" import nav, header with context %}
  {% block body %}
     {{ super() }}
     {{ aside() }}
  {% endblock %}
  {% block nav %}
     {{ nav('show') }}
  {% endblock %}
  {% block header %}
     {{ super() }}
    {{ header() }}
  {% endblock %}
  {% block main %}
    {{ super() }}
    <section id="cloud">
      {% for category in categories %}
        <div class="nav">
          <p>{{ category.name }}</p>
        </div>
        <div class="cloud">
          {% for file in category.files %}
            <div class="view">
              <!--
              <div class="action">
                <form action="/share/{{ file.id }}" method="post">
                  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
                  <input type="submit" value="Share" />
                </form>
              </div>
              -->
      
              <a href="/files/edit/{{ file.uid }}" title="{{ file.title }}">
                {% if file.mime in config["ftypes"]["plain"] %}
                <div class="item" style="background-image: url({{ url_for('static', filename='fontawesome/text.svg') }});">
                  <p>{{ file.title }}</p>
                  <p>{{ file.mime }}</p>
                </div>
                {% elif file.mime in config["ftypes"]["code"] %}
                <div class="item" style="background-image: url({{ url_for('static', filename='fontawesome/computer.svg') }});">
                  <p>{{ file.title }}</p>
                  <p>{{ file.mime }}</p>
                </div>
                {% elif file.mime in config["ftypes"]["image"] %}
                <div class="item" style="background-image: url('./thumbnail/{{ file.uid }}');">
                  <p>{{ file.title }}</p>
                  <p>{{ file.mime }}</p>
                </div>
                {% elif file.mime in config["ftypes"]["markup"] %}
                <div class="item" style="background-image: url({{ url_for('static', filename='fontawesome/markup.svg') }});">
                  <p>{{ file.title }}</p>
                  <p>{{ file.mime }}</p>
                </div>
                {% elif file.mime in config["ftypes"]["font"] %}
                <div class="item" style="background-image: url({{ url_for('static', filename='fontawesome/font.svg') }});">
                  <p>{{ file.title }}</p>
                  <p>{{ file.mime }}</p>
                </div>
                {% elif file.mime in config["ftypes"]["archive"] %}
                <div class="item" style="background-image: url({{ url_for('static', filename='fontawesome/archive.svg') }});">
                  <p>{{ file.title }}</p>
                  <p>{{ file.mime }}</p>
                </div>
                {% elif file.mime in config["ftypes"]["document"] %}
                <div class="item" style="background-image: url({{ url_for('static', filename='fontawesome/document.svg') }});">
                  <p>{{ file.title }}</p>
                  <p>{{ file.mime }}</p>
                </div>
                {% elif file.mime in config["ftypes"]["audio"] %}
                <div class="item" style="background-image: url({{ url_for('static', filename='fontawesome/audio.svg') }});">
                  <p>{{ file.title }}</p>
                  <p>{{ file.mime }}</p>
                </div>
                {% elif file.mime in config["ftypes"]["video"] %}
                <div class="item" style="background-image: url({{ url_for('static', filename='fontawesome/video.svg') }});">
                  <p>{{ file.title }}</p>
                  <p>{{ file.mime }}</p>
                </div>
                {% else %}
                <div class="item" style="background-image: url({{ url_for('static', filename='fontawesome/unknown.svg') }});">
                  <p>{{ file.title }}</p>
                  <p>{{ file.mime }}</p>
                </div>
                {% endif %}
              </a>
              
              <div class="action">
                <form action="/files/delete/{{ file.uid }}" method="post">
                  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
                  <input type="submit" value="Delete" />
                </form>
              </div>
            </div>
          {% endfor %}
        </div>
      {% endfor %}
    </section>
  {% endblock %}

  {% block footer %}
    {{ super() }}
  {% endblock %}

